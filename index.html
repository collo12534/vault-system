<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Trustvault — Savings Management</title>

  <!-- Tailwind CDN (for simplicity) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Chart.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.3.0/chart.umd.min.js"></script>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <style>
    /* Small visual tuning beyond default Tailwind */
    body { background: #f4f7fb; font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; }
    .card { background: white; box-shadow: 0 6px 18px rgba(12, 20, 35, 0.06); border-radius: 0.75rem; }
    /* payment badge colors */
    .pm-bank { background:#e6f0ff;color:#1e3a8a }       /* blue */
    .pm-cash { background:#ecfdf5;color:#065f46 }       /* green */
    .pm-card { background:#f5f3ff;color:#6d28d9 }       /* purple */
    .pm-paypal { background:#eef2ff;color:#0f172a }     /* dark-blue look */
    .pm-empesa { background:#ecfdf5;color:#047857 }     /* mpesa-green */
    /* modal backdrop fix */
    .modal-backdrop { background: rgba(2,6,23,0.45); }
    /* small table fix */
    table th, table td { padding: .5rem .75rem; }
  </style>
</head>
<body class="min-h-screen">

<!-- App container -->
<div id="app" class="flex min-h-screen">

  <!-- Sidebar (off-canvas on small screens) -->
  <aside id="sidebar" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="sidebarTitle" class="w-64 p-6 bg-slate-900 text-white flex flex-col fixed left-0 top-0 h-full transform -translate-x-full md:translate-x-0 md:relative md:top-auto md:left-auto md:h-auto md:flex transition-transform duration-200 ease-in-out z-50">
    <div class="flex items-center gap-3 mb-6 justify-between">
      <div class="flex items-center gap-3">
        <img id="siteLogo" src="jlc.jpg" alt="Trustvault logo" class="w-16 h-16 object-cover rounded-full" />
        <div>
        <div class="font-bold text-lg">TRUSTVAULT</div>
        <div class="text-xs text-slate-300">Where money is safe</div>
      </div>
      </div>
      <!-- Close on mobile -->
      <button id="sidebarCloseBtn" class="md:hidden text-slate-300 p-2 rounded hover:bg-white/5" aria-label="Close menu"><i class="fa-solid fa-xmark"></i></button>
    </div>

    <nav class="flex-1 space-y-1 text-sm">
      <button data-page="dashboard" class="w-full text-left sidebar-btn active flex items-center gap-3 px-3 py-2 rounded">
        <i class="fa-solid fa-gauge"></i><span>Dashboard</span>
      </button>
      <button data-page="members" class="w-full text-left sidebar-btn flex items-center gap-3 px-3 py-2 rounded">
        <i class="fa-solid fa-users"></i><span>Members</span>
      </button>
      <button data-page="savings" class="w-full text-left sidebar-btn flex items-center gap-3 px-3 py-2 rounded">
        <i class="fa-solid fa-piggy-bank"></i><span>Savings</span>
      </button>
      <button data-page="messages" class="w-full text-left sidebar-btn flex items-center gap-3 px-3 py-2 rounded">
        <i class="fa-solid fa-comments"></i><span>Messages</span><span id="msgDot" class="ml-auto text-red-400 hidden"><i class="fa-solid fa-circle-exclamation"></i></span>
      </button>
      <button data-page="statistics" class="w-full text-left sidebar-btn flex items-center gap-3 px-3 py-2 rounded">
        <i class="fa-solid fa-chart-line"></i><span>Statistics</span>
      </button>
      <button data-page="invoices" class="w-full text-left sidebar-btn flex items-center gap-3 px-3 py-2 rounded">
        <i class="fa-regular fa-file-invoice"></i><span>Invoices</span>
      </button>
      <button data-page="todo" class="w-full text-left sidebar-btn flex items-center gap-3 px-3 py-2 rounded">
        <i class="fa-solid fa-list-check"></i><span>  Notes</span>
      </button>
      <button data-page="finances" class="w-full text-left sidebar-btn flex items-center gap-3 px-3 py-2 rounded">
        <i class="fa-solid fa-wallet"></i><span>Finances</span>
      </button>
      <button data-page="help" class="w-full text-left sidebar-btn flex items-center gap-3 px-3 py-2 rounded">
        <i class="fa-solid fa-circle-info"></i><span>Help & Center</span>
      </button>
      <button data-page="settings" class="w-full text-left sidebar-btn flex items-center gap-3 px-3 py-2 rounded">
        <i class="fa-solid fa-gear"></i><span>Settings</span>
      </button>
    </nav>

    <div class="mt-6 text-xs text-slate-400">
      <div>Admin: <span id="adminNameShort" class="text-white">Admin</span></div>
      <div class="mt-2">Currency: <span id="currencyShort" class="text-white">KES</span></div>
      <button id="logoutBtn" class="mt-4 w-full bg-slate-700 text-white py-2 rounded text-sm">Log Out</button>
    </div>
  </aside>

  <!-- Mobile header (visible on small screens) -->
  <div class="w-full bg-transparent md:hidden p-3 flex items-center justify-between">
    <button id="mobileMenuBtn" type="button" class="p-2 bg-white/10 text-white rounded"><i class="fa-solid fa-bars"></i></button>
    <div class="flex items-center gap-3">
      <div id="todayBadgeMobile" class="px-3 py-1 bg-white rounded text-slate-700 text-sm shadow">Today</div>
      <div class="w-8 h-8 bg-white rounded-full flex items-center justify-center shadow"><i class="fa-solid fa-user"></i></div>
    </div>
  </div>

  <!-- Backdrop for mobile sidebar -->
  <div id="sidebarBackdrop" class="fixed inset-0 bg-black/50 z-40 hidden md:hidden"></div>

  <!-- Main content -->
  <div id="mainContent" class="flex-1 p-6">
    <!-- Header -->
    <header class="flex items-center justify-between mb-6">
      <div>
        <h1 class="text-2xl font-semibold">Welcome Back, Alpha</h1>
        <p class="text-sm text-slate-500">save today secure tomorrow</p>
      </div>

      <div class="flex items-center gap-3">
        <div id="todayBadge" class="px-3 py-1 bg-white rounded text-slate-700 text-sm shadow">Today</div>
        <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center shadow"><i class="fa-solid fa-user"></i></div>
      </div>
    </header>

    <!-- PAGES (single-file app) -->
    <main id="pages" class="space-y-6">

      <!-- Dashboard -->
      <section id="page-dashboard" class="space-y-4">
        <div class="grid grid-cols-12 gap-4">
          <!-- KPIs -->
          <div class="col-span-12 md:col-span-3">
            <div class="card p-4">
              <div class="text-xs text-slate-400">Members</div>
              <div id="kpiMembers" class="text-xl font-bold">0</div>
              <div class="text-xs text-slate-500">Total registered</div>
            </div>
          </div>

          <div class="col-span-12 md:col-span-3">
            <div class="card p-4">
              <div class="text-xs text-slate-400">Savings</div>
              <div id="kpiSavings" class="text-xl font-bold">KES 0</div>
              <div class="text-xs text-slate-500">Total saved</div>
            </div>
          </div>

          <div class="col-span-12 md:col-span-3">
            <div class="card p-4">
              <div class="text-xs text-slate-400">Recently Added</div>
              <div id="kpiRecent" class="text-xl font-bold">—</div>
              <div class="text-xs text-slate-500">Last member</div>
            </div>
          </div>

          <div class="col-span-12 md:col-span-3">
            <div class="card p-4">
              <div class="text-xs text-slate-400">Target</div>
              <div id="kpiTarget" class="text-xl font-bold">KES 0</div>
              <div id="kpiTargetSub" class="text-xs text-slate-500">0 days est.</div>
            </div>
          </div>

          <!-- Charts (reduced size for space) -->
          <div class="col-span-12 md:col-span-5">
            <div class="card p-4">
              <div class="flex items-center justify-between">
                <div>
                  <div class="text-sm font-semibold">Member Savings Share</div>
                  <div class="text-xs text-slate-500">% of total saved per member</div>
                </div>
                <div class="text-xs text-slate-400">Live</div>
              </div>
              <canvas id="donut" class="mt-3" style="max-height:200px"></canvas>
            </div>
          </div>

          <div class="col-span-12 md:col-span-7">
            <div class="card p-4">
              <div class="flex items-center justify-between">
                <div>
                  <div class="text-sm font-semibold">Daily Performance</div>
                  <div class="text-xs text-slate-500">Last 14 days</div>
                </div>
                <div class="text-xs text-slate-400">Daily</div>
              </div>
              <canvas id="line" class="mt-3" style="max-height:200px"></canvas>
            </div>
          </div>

          <!-- Recent transactions (visible) -->
          <div class="col-span-12">
            <div class="card p-4">
              <div class="flex items-center justify-between mb-3">
                <div>
                  <div class="text-sm font-semibold">Recent Transactions</div>
                  <div class="text-xs text-slate-500">Latest deposits & withdrawals</div>
                </div>
                <div>
                  <button id="clearMessages" class="text-sm bg-slate-100 px-3 py-1 rounded">Clear messages</button>
                </div>
              </div>

              <div class="overflow-x-auto">
                <table class="w-full text-left">
                  <thead class="text-xs text-slate-500">
                    <tr><th>#</th><th>Member</th><th>Type</th><th>Amount</th><th>Date</th><th>Method</th></tr>
                  </thead>
                  <tbody id="recentTbody" class="text-sm"></tbody>
                </table>
              </div>

            </div>
          </div>
        </div>
      </section>

      <!-- Members -->
      <section id="page-members" class="hidden">
        <div class="card p-4">
          <div class="flex items-center justify-between mb-4">
            <div><h2 class="text-lg font-semibold">Members</h2><div class="text-xs text-slate-500">Add, edit or remove members</div></div>
            <div><button id="addMemberBtn" class="bg-sky-600 text-white px-3 py-1 rounded"><i class="fa-solid fa-plus mr-2"></i>Add member</button></div>
          </div>

          <div class="overflow-x-auto">
            <table class="w-full text-left">
              <thead class="text-xs text-slate-500"><tr><th>#</th><th>Name</th><th>Phone</th><th>Joined</th><th>Saved</th><th>Actions</th></tr></thead>
              <tbody id="membersTbody" class="text-sm"></tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- Savings -->
      <section id="page-savings" class="hidden">
        <div class="grid md:grid-cols-3 gap-4">
          <div class="card p-4">
            <div class="text-sm font-semibold">Make Transaction</div>
            <div class="text-xs text-slate-500 mb-3">Choose member and deposit/withdraw</div>
            <select id="memberSelect" class="w-full p-2 border rounded mb-3"></select>

            <div class="flex gap-2">
              <button id="depositBtn" class="flex-1 bg-emerald-600 text-white p-2 rounded"><i class="fa-solid fa-arrow-down mr-2"></i>Deposit</button>
              <button id="withdrawBtn" class="flex-1 bg-rose-500 text-white p-2 rounded"><i class="fa-solid fa-arrow-up mr-2"></i>Withdraw</button>
            </div>

            <div class="mt-4">
              <div class="text-xs text-slate-400">Selected balance</div>
              <div id="selectedBalance" class="text-lg font-semibold">KES 0</div>
            </div>
          </div>

          <div class="card p-4 md:col-span-2">
            <div class="text-sm font-semibold">Transactions</div>
            <div class="text-xs text-slate-500 mb-3">All transactions</div>
            <div class="overflow-x-auto">
              <table class="w-full text-left">
                <thead class="text-xs text-slate-500"><tr><th>#</th><th>Member</th><th>Type</th><th>Amount</th><th>Date</th><th>Method</th><th>Action</th></tr></thead>
                <tbody id="transactionsTbody" class="text-sm"></tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <!-- Messages -->
      <section id="page-messages" class="hidden">
        <div class="card p-4">
          <div class="flex items-center justify-between mb-3">
            <div><h2 class="text-lg font-semibold">Messages</h2><div class="text-xs text-slate-500">Activity, warnings, reminders</div></div>
            <div><button id="filterMsgs" class="px-3 py-1 bg-slate-100 rounded text-sm">Filter</button></div>
          </div>

          <div id="messagesList" class="space-y-3"></div>
        </div>
      </section>

      <!-- Statistics -->
      <section id="page-statistics" class="hidden">
        <div class="card p-4">
          <h2 class="text-lg font-semibold">Statistics</h2>
          <div class="text-xs text-slate-500 mb-3">Member breakdown & progress</div>
          <div id="statsList" class="space-y-2"></div>
        </div>
      </section>

      <!-- Invoices -->
      <section id="page-invoices" class="hidden">
        <div class="card p-4">
          <h2 class="text-lg font-semibold">Invoices / Pending</h2>
          <div class="text-xs text-slate-500 mb-3">Daily expected deposits status</div>
          <div class="overflow-x-auto">
            <table class="w-full text-left">
              <thead class="text-xs text-slate-500"><tr><th>#</th><th>Member</th><th>Date</th><th>Expected</th><th>Status</th><th>Action</th></tr></thead>
              <tbody id="invoicesTbody" class="text-sm"></tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- To Do -->
      <section id="page-todo" class="hidden">
        <div class="card p-4">
          <div class="flex items-center justify-between mb-3">
            <div><h2 class="text-lg font-semibold">To Do / Notes</h2><div class="text-xs text-slate-500">Notes, events, meeting minutes</div></div>
            <div><button id="addTodoBtn" class="px-3 py-1 bg-sky-600 text-white rounded text-sm">Add note</button></div>
          </div>
          <div id="todoList" class="space-y-2"></div>
        </div>
      </section>

      <!-- Finances -->
      <section id="page-finances" class="hidden">
        <div class="card p-4">
          <h2 class="text-lg font-semibold">Finances</h2>
          <div class="text-xs text-slate-500 mb-3">Target vs Achieved and today's savings</div>
          <div class="grid grid-cols-3 gap-4">
            <div>
              <div class="text-xs text-slate-400">Target</div>
              <div id="finTarget" class="font-bold text-lg">KES 0</div>
            </div>
            <div>
              <div class="text-xs text-slate-400">Achieved</div>
              <div id="finAchieved" class="font-bold text-lg">KES 0</div>
            </div>
            <div>
              <div class="text-xs text-slate-400">Saved Today</div>
              <div id="finToday" class="font-bold text-lg">KES 0</div>
            </div>
          </div>
        </div>
      </section>

      <!-- Help & Center -->
      <section id="page-help" class="hidden">
        <div class="card p-4">
          <h2 class="text-lg font-semibold">Help & Center</h2>
          <div class="text-xs text-slate-500 mb-3">How to perform common tasks</div>

          <div class="grid md:grid-cols-2 gap-3">
            <div class="p-3 border rounded">
              <div class="font-semibold">Add a Member</div>
              <div class="text-xs text-slate-500">Navigate to Members → Add member → fill name & phone → Save.</div>
            </div>

            <div class="p-3 border rounded">
              <div class="font-semibold">Deposit</div>
              <div class="text-xs text-slate-500">Savings → Select member → Deposit → Enter amount → Choose payment method → Confirm.</div>
            </div>

            <div class="p-3 border rounded">
              <div class="font-semibold">Withdraw</div>
              <div class="text-xs text-slate-500">Savings → Select member → Withdraw → Enter amount (<=balance) → Confirm.</div>
            </div>

            <div class="p-3 border rounded">
              <div class="font-semibold">Daily Minimum / Currency</div>
              <div class="text-xs text-slate-500">Settings → Daily Rules → Change minimum and currency. Default is KES.</div>
            </div>

            <div class="p-3 border rounded col-span-2">
              <div class="font-semibold">Navigation tips</div>
              <div class="text-xs text-slate-500">Use the sidebar to switch pages. Dashboard shows quick KPIs and recent transactions. Settings affects system behavior.</div>
            </div>
          </div>
        </div>
      </section>

      <!-- Settings -->
      <section id="page-settings" class="hidden">
        <div class="card p-4">
          <h2 class="text-lg font-semibold">Settings</h2>
          <div class="text-xs text-slate-500 mb-3">Admin profile, targets, daily minimum, currency, payment methods</div>

          <div class="grid md:grid-cols-2 gap-4">
            <div class="p-4 border rounded space-y-3">
              <div class="font-semibold">Admin Profile</div>
              <input id="settingAdminName" placeholder="Admin name" class="w-full p-2 border rounded" />
              <input id="settingAdminEmail" placeholder="Admin email" class="w-full p-2 border rounded" />
              <div class="flex justify-end">
                <button id="saveAdminBtn" class="px-3 py-1 bg-sky-600 text-white rounded">Save</button>
              </div>
            </div>

            <div class="p-4 border rounded space-y-3">
              <div class="font-semibold">Target & Est. Time</div>
              <input id="settingTarget" type="number" placeholder="Target amount" class="w-full p-2 border rounded" />
              <input id="settingEst" type="number" placeholder="Estimated days" class="w-full p-2 border rounded" />
              <div class="flex justify-end">
                <button id="saveTargetBtn" class="px-3 py-1 bg-sky-600 text-white rounded">Save</button>
              </div>
            </div>

            <div class="p-4 border rounded space-y-3">
              <div class="font-semibold">Daily Rules</div>
              <input id="settingDailyMin" type="number" placeholder="Daily minimum" class="w-full p-2 border rounded" />
              <select id="settingCurrency" class="w-full p-2 border rounded">
                <option value="KES">Shillings (KES)</option>
                <option value="USD">US Dollar (USD)</option>
                <option value="EUR">Euro (EUR)</option>
                <option value="JPY">Yen (JPY)</option>
              </select>
              <div class="flex justify-end">
                <button id="saveRulesBtn" class="px-3 py-1 bg-sky-600 text-white rounded">Save</button>
              </div>
            </div>

            <div class="p-4 border rounded space-y-3">
              <div class="font-semibold">Admin Password</div>
              <input id="settingPwd1" type="password" placeholder="New admin password" class="w-full p-2 border rounded" />
              <input id="settingPwd2" type="password" placeholder="Confirm password" class="w-full p-2 border rounded" />
              <div class="flex justify-end">
                <button id="savePwdBtn" class="px-3 py-1 bg-sky-600 text-white rounded">Change</button>
              </div>
            </div>

            <div class="p-4 border rounded space-y-3 md:col-span-2">
              <div class="font-semibold">Payment Methods (toggle)</div>
              <div class="flex flex-wrap gap-2 mt-2">
                <label class="inline-flex items-center gap-2 p-2 rounded border">
                  <input type="checkbox" class="pm-check" value="bank" checked /> <span class="px-2 py-1 rounded pm-bank text-sm">Bank <i class="fa-solid fa-university ml-2"></i></span>
                </label>
                <label class="inline-flex items-center gap-2 p-2 rounded border">
                  <input type="checkbox" class="pm-check" value="cash" checked /> <span class="px-2 py-1 rounded pm-cash text-sm">Cash <i class="fa-solid fa-money-bill-wave ml-2"></i></span>
                </label>
                <label class="inline-flex items-center gap-2 p-2 rounded border">
                  <input type="checkbox" class="pm-check" value="card" checked /> <span class="px-2 py-1 rounded pm-card text-sm">Card <i class="fa-solid fa-credit-card ml-2"></i></span>
                </label>
                <label class="inline-flex items-center gap-2 p-2 rounded border">
                  <input type="checkbox" class="pm-check" value="paypal" checked /> <span class="px-2 py-1 rounded pm-paypal text-sm">PayPal <i class="fa-brands fa-paypal ml-2"></i></span>
                </label>
                <label class="inline-flex items-center gap-2 p-2 rounded border">
                  <input type="checkbox" class="pm-check" value="empesa" checked /> <span class="px-2 py-1 rounded pm-empesa text-sm">E-mpesa <i class="fa-solid fa-mobile-screen-button ml-2"></i></span>
                </label>
              </div>
              <div class="flex justify-end">
                <button id="savePaymentsBtn" class="px-3 py-1 bg-sky-600 text-white rounded">Save</button>
              </div>
            </div>

          </div>

        </div>
      </section>

    </main>

  <footer class="mt-6 text-xs text-slate-400"></footer>
  </div>
</div>

<!-- Modals & Login -->
<div id="modalRoot"></div>

<!-- Login overlay removed (password barrier disabled) -->

<!-- Minimal JS: app logic -->
<script src="App.js"></script>

</body>
</html>
